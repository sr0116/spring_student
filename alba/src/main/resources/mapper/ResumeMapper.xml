<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE mapper
        PUBLIC "-//mybatis.org//DTD Mapper 3.0//EN"
        "http://mybatis.org/dtd/mybatis-3-mapper.dtd">

<mapper namespace="com.example.alba.mapper.ResumeMapper">
    <resultMap id="ResumeResultMap" type="com.example.alba.domain.Resume">
        <id property="resumeNo" column="resume_no"/>
        <result property="userNo" column="user_no"/>
        <result property="title" column="title"/>
        <result property="introduce" column="introduce"/>

        <association property="user" javaType="com.example.alba.domain.AlbaUser">
            <id property="userNo" column="user_no"/>
            <result property="name" column="name"/>
            <result property="tel" column="tel"/>
            <result property="id" column="id"/>
            <result property="pw" column="pw"/>
            <result property="area" column="area"/>
        </association>
    </resultMap>


    <!-- 리스트 조회 -->
    <select id="resumeList" resultMap="ResumeResultMap">
        select r.resume_no, a.name,  a.id, a.pw, a.area
        from resume r
                 join alba_user a on r.user_no = a.user_no
    </select>

    <select id="selectOneResume" resultType="com.example.alba.domain.Resume">
        select *
        from resume
        where user_no = #{userNo} LIMIT 1
    </select>

</mapper>
